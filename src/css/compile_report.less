@import "_flex.less";
@import "_colors.less";
@import "_constants.less";


.compilation-report {
  width: 100%;
}

.compilation-report {

  position: relative;
  ._flex-column();

  dialog&.compilation-report-floating {
    position: absolute;
    appearance: none;
    -webkit-appearance: none;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 70%;
    height: 80vh;
    z-index: 100;
    color: @color-dark;
    color: var(--color);
    background: @background-dark;
    background: var(--background);
    border-radius: @border-radius;
    border-radius: var(--border-radius);

    &::backdrop {
      content: ' ';
      position: fixed;
      width: 100vw;
      height: 100vh;
      top: 0;
      left: 0;
      z-index: 100;
      background: rgba(0, 0, 0, 0.4);
    }

    & .compilation-report {
      position: absolute;
      z-index: 101;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 70%;
      height: 70%;
      background: @background-dark;
      background: var(--background);
    }

  }

  & .compilation-report-items {
    ._flex-column();
    .flex-column-flex-fill();
    overflow-y: auto;
    overflow-x: hidden;

    & .compilation-data-item {
      & > * {
        margin: 0;
        padding: 0;
      }

      &[data-gender='male'] + [data-gender='female'] {
        margin-top: 1rem;

        &:before {
          display: block;
          content: 'Female:';
        }
      }

      &[data-status='skipped'] {
        opacity: 0.7;
      }

      &[data-gender=male]:before, &[data-gender=female]:before {
        display: block;
        font-weight: bold;
      }

      &[data-gender="male"]:first-of-type:before {
        display: block;
        content: 'Male:';
      }

      .compilation-item-head {
        display: inline-block;
        //width: 10rem;

        & > [data-item="gender"] {
          display: inline-block;
          width: 4rem;
        }

        & > [data-item="percent"] {
          display: inline-block;
          width: 3rem;
          text-align: right;
        }
      }

      & .data-item {
        &:not(:last-child):after {
          content: ':';
        }
      }

      &[data-no-atts="true"] {
        & .show-on-no-atts {
          display: none !important;
        }
      }

      &[data-no-atts="true"] {
        & .hide-on-no-atts {
          display: none !important;
        }
      }

      &:not([data-no-atts="shared"]) {
        & .show-on-shared-atts {
          display: none !important;
        }
      }

      &:not([data-no-atts="true"]), &:not([data-no-atts="shared"]) {
        & .show-on-no-atts {
          display: none !important;
        }
      }

      &[data-att-status="partial"], &[data-sprite-status="partial"] {
        & .compilation-item-head {
          & [data-item="percent"] {
          }
        }

        & .missing-container-header {
          ._warning();
        }

        & .missing-container {
          display: inline-block;
          //margin-left: 1rem;
          &:before {
            content: '- ';
          }

          & h4 {
            display: inline-block;
            padding: 0;
            margin: 0;
          }

          & [data-missing] {

            display: inline-block;

            &:not(:first-of-type) {
              &:before {
                //content: ',';
              }
            }

            & h5 {
              font-size: 1rem;
              display: inline-block;
              margin: 0;
              padding: 0;
            }

            & .missing-list {
              margin: 0;
              display: inline-block;

              & > .missing-item {
                padding-right: 0.2rem;
                display: inline-block;

                &:not(.missing-item-last):after {
                  content: ',';
                  padding-left: 0;
                }
              }

              &:before {
                margin: 0;
                padding: 0;
                content: '[';
              }

              &:after {
                margin: 0;
                padding: 0;
                content: ']';
              }
            }

            //noinspection ALL
            &.no-atts {
              font-weight: bold;
            }

            &.shared-atts {
              font-style: italic;
              opacity: 0.7;
            }
          }
        }
      }

      &:not([data-att-status="partial"]) {
        & [data-missing="atts"] {
          display: none !important;
        }
      }

      &:not([data-sprite-status="partial"]) {
        & [data-missing="sprites"] {
          display: none !important;;
        }
      }

      &:not([data-att-status="partial"]):not([data-sprite-status="partial"]) {
        .missing-container {
          display: none !important;;
        }
      }
    }
  }

  footer {
    position: absolute;
    right: 2rem;
    bottom: 2rem;
  }

}
